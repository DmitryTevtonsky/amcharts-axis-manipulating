(this["webpackJsonpamcharts-axis-manipulating"]=this["webpackJsonpamcharts-axis-manipulating"]||[]).push([[0],{104:function(e,a,t){e.exports={legendLayout:"legend_legendLayout__1raCo",legendTitle:"legend_legendTitle__2OKmf",legendTitleHidden:"legend_legendTitleHidden__3-kI0",legendDroppableContainer:"legend_legendDroppableContainer__2wRgZ",isContainerDroppableNow:"legend_isContainerDroppableNow__reRWS"}},105:function(e,a,t){e.exports={root:"page_root__2umMH",layout:"page_layout__8xvbr",sider:"page_sider__3h4Nr",recalculatingResult:"page_recalculatingResult__mG2-C",content:"page_content__3vzB4",contentHidden:"page_contentHidden__12tl9"}},112:function(e,a,t){e.exports={layout:"chart_layout__3bfoe",chartLayout:"chart_chartLayout__3fKun",chart:"chart_chart__13LjZ",chartDateAxis:"chart_chartDateAxis__6BJ3Z"}},132:function(e,a,t){e.exports={tagItem:"tag-item_tagItem__20T8n",tagDragIcon:"tag-item_tagDragIcon__2Ah8g",isTagItemDraggableNow:"tag-item_isTagItemDraggableNow__2AN7v"}},133:function(e,a,t){e.exports={droppableContainer:"new-axis-creator_droppableContainer__1Zwsc",isDroppableNow:"new-axis-creator_isDroppableNow__2oVX7",dropHintLayout:"new-axis-creator_dropHintLayout__wHA1f"}},166:function(e,a,t){e.exports=t(212)},212:function(e,a,t){"use strict";t.r(a);var r=t(4),n=t.n(r),i=t(74),s=t.n(i),o=(t(171),t(59)),c=t(32),l=t(33),d=function(){return{isLoaded:0,isSiderCollapsed:!1,isSiderCollapsingNow:!1,setSiderCollapsed:function(e){var a=this;this.isSiderCollapsingNow=!0,this.isSiderCollapsed=e,setTimeout((function(){a.isSiderCollapsingNow=!1}),1e3)},chartInstance:null,setChartInstance:function(e){this.chartInstance=e},tagsDictionary:{},generateTags:function(e){var a=Array.from({length:e},(function(e,a){return a+1})).reduce((function(e,a){var t={id:"tag-".concat(a),name:"Tag-".concat(a)};return Object(l.a)(Object(l.a)({},e),{},Object(c.a)({},"tag-".concat(a),t))}),{});console.log("tags",a),this.tagsDictionary=a},isTagDraggingNow:!1,setIsTagDraggingNow:function(e){this.isTagDraggingNow=e},axesDictionary:{},setAxesDictionary:function(e){this.axesDictionary=e},axesOrder:[],setAxesOrder:function(e){this.axesOrder=e},generateAxes:function(e){var a=this,t=Array.from({length:e},(function(e,a){return a+1})).reduce((function(e,t){return Object(l.a)(Object(l.a)({},e),{},Object(c.a)({},"axis-".concat(t),{name:"Axis-".concat(t),id:"axis-".concat(t),tags:[a.tagsDictionary["tag-".concat(t)].id]}))}),{}),r=Object.keys(t);console.log("axes",t),this.axesOrder=r,this.axesDictionary=t},data:[],generateData:function(e){var a=this,t=e.parametersCount,r=void 0===t?10:t,n=e.pointsCount,i=void 0===n?100:n;this.generateTags(r),this.generateAxes(r);var s=Array.from({length:i},(function(e,t){return Object(l.a)({ts:new Date(2020,0,t)},Object.keys(a.tagsDictionary).reduce((function(e,a){return Object(l.a)(Object(l.a)({},e),{},Object(c.a)({},a,Math.round(100*Math.random())+100))}),{}))}));console.log("data",s),this.data=s}}},g=n.a.createContext(null),u=function(e){var a=e.children,t=Object(o.b)(d),i=Object(r.useMemo)((function(){return{core:t}}),[t]);return n.a.createElement(g.Provider,{value:i},a)},p=function(e){return function(e,a,t){var r=n.a.useContext(e);if(!r)throw new Error;return t(a(r))}(g,(function(e){return e}),e)},b=t(106),m=t(85),x=new m.b,f=function(e){var a=e.xAxes.push(new b.a);return a.startLocation=.5,a.endLocation=.5,a.renderer.minGridDistance=100,a.renderer.line.strokeOpacity=.5,a.renderer.line.strokeWidth=5,a.renderer.line.stroke=m.c("#000000"),a.renderer.ticks.template.disabled=!1,a.renderer.ticks.template.strokeOpacity=1,a.renderer.ticks.template.length=10,a.renderer.labels.template.location=.5,a.renderer.labels.template.verticalCenter="middle",a.renderer.labels.template.horizontalCenter="middle",a},_=function(e){var a=e.yAxes.push(new b.c);return a.renderer.gridContainer.background.fill=x.getFor("alternativeBackground"),a.renderer.gridContainer.background.fillOpacity=.05,a.renderer.inside=!0,a.renderer.maxLabelPosition=.99,a.renderer.labels.template.padding(0,2,0,2),a.renderer.labels.template.verticalCenter="bottom",a.marginBottom=10,a},h=function(e,a,t){console.log({valueAxis:a,id:t});var r=e.series.push(new b.b);return r.strokeWidth=1,r.dataFields.valueY="".concat(t),r.dataFields.dateX="ts",r.yAxis=a,r.name=t,r.tooltipText="\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435: {valueY}",r},D=t(112),O=t.n(D),v=Object(o.a)((function(){var e=p((function(e){return{tagsDictionary:e.core.tagsDictionary,axesOrder:e.core.axesOrder,axesDictionary:e.core.axesDictionary,data:e.core.data,chartInstance:e.core.chartInstance,setChartInstance:e.core.setChartInstance}})),a=e.tagsDictionary,t=e.axesOrder,i=e.axesDictionary,s=e.data,o=e.chartInstance,c=e.setChartInstance;return Object(r.useEffect)((function(){var e=function(e){var a=m.d(e,b.d);a.padding(0,0,0,0),a.leftAxesContainer.layout="vertical";var t=f(a),r=new b.e;a.cursor=r,a.cursor.xAxis=t;var n=m.d("date-axis",m.a);return n.width=m.e(100),n.height=m.e(100),a.bottomAxesContainer.parent=n,t.tooltip.parent=n,t.renderer.ticks.template.parent=n,{chart:a}}("chart").chart;return c(e),function(){return e.dispose()}}),[c]),Object(r.useEffect)((function(){o&&s.length&&(o.yAxes.clear(),o.series.clear(),o.data=s,t.forEach((function(e){var t=_(o);i[e].tags.map((function(e){var r=a[e];return function(e,a,t){var r;if(a)r=h(e,a,t);else{var n=_(e);r=h(e,n,t)}return r}(o,t,r.id)}))})))}),[t,i,a,s,o]),n.a.createElement("div",{className:O.a.layout},n.a.createElement("div",{className:O.a.chartLayout},n.a.createElement("div",{className:O.a.chart,id:"chart"})),n.a.createElement("div",{className:O.a.chartDateAxis,id:"date-axis"}))})),y=t(160),j=t(68),N=t(30),w=t.n(N),I=t(132),C=t.n(I),E=function(e){var a=e.tag,t=e.index;return n.a.createElement(j.b,{draggableId:"".concat(a.id),index:t},(function(e,t){var r=e.innerRef,i=e.draggableProps,s=e.dragHandleProps;return n.a.createElement("h4",Object.assign({ref:r,className:w()(C.a.tagItem,Object(c.a)({},C.a.isTagItemDraggableNow,t.isDragging))},i,s),n.a.createElement("span",null,a.name),n.a.createElement("span",{className:C.a.tagDragIcon},"\u22ee"))}))},A=t(72),T=t.n(A),S=Object(o.a)((function(e){var a=e.axis,t=a.tags,r=a.name,i=a.id,s=e.index,o=p((function(e){return{tagsDictionary:e.core.tagsDictionary,isTagDraggingNow:e.core.isTagDraggingNow}})),l=o.tagsDictionary,d=o.isTagDraggingNow;return n.a.createElement(j.b,{draggableId:"".concat(i),index:s},(function(e,a){var s=a.isDragging;return n.a.createElement("div",Object.assign({ref:e.innerRef,className:w()(T.a.axisItem,Object(c.a)({},T.a.isAxisItemDraggableNow,s))},e.draggableProps,e.dragHandleProps),n.a.createElement("h4",{className:w()(T.a.axisTitle,Object(c.a)({},T.a.isAxisDraggableBordered,s))},n.a.createElement("span",null,r),n.a.createElement("span",{className:T.a.axisDragIcon},"\u22ee\u22ee")),n.a.createElement(j.c,{droppableId:i,type:"tags"},(function(e){var a;return n.a.createElement("div",Object.assign({ref:e.innerRef},e.droppableProps,{className:w()(T.a.axisTags,(a={},Object(c.a)(a,T.a.isAxisTagsDroppableNow,d),Object(c.a)(a,T.a.isAxisDraggableBordered,s),a))}),t.map((function(e,a){var t=l[e];return n.a.createElement(E,{key:t.id,index:a,tag:t})})),e.placeholder)})),n.a.createElement("div",null))}))})),k=t(133),L=t.n(k),H=Object(o.a)((function(){var e=p((function(e){return{isTagDraggingNow:e.core.isTagDraggingNow}})).isTagDraggingNow;return n.a.createElement(j.c,{direction:"vertical",droppableId:"new-axis",type:"tags"},(function(a){return n.a.createElement("div",Object.assign({className:w()(L.a.droppableContainer,Object(c.a)({},L.a.isDroppableNow,e))},a.droppableProps,{ref:a.innerRef}),n.a.createElement("div",{className:L.a.dropHintLayout},n.a.createElement("span",null,"Drop tag here "),n.a.createElement("span",null,"to create new axis")),a.placeholder)}))})),B=t(104),R=t.n(B),P=Object(o.a)((function(){var e=p((function(e){return{isSiderCollapsed:e.core.isSiderCollapsed,tagsDictionary:e.core.tagsDictionary,axesOrder:e.core.axesOrder,axesDictionary:e.core.axesDictionary,setAxesOrder:e.core.setAxesOrder,setAxesDictionary:e.core.setAxesDictionary,setIsTagDraggingNow:e.core.setIsTagDraggingNow}})),a=e.isSiderCollapsed,t=(e.tagsDictionary,e.axesOrder),r=e.axesDictionary,i=e.setAxesOrder,s=e.setAxesDictionary,o=e.setIsTagDraggingNow;return n.a.createElement("div",{className:R.a.legendLayout},n.a.createElement("h2",{className:w()(R.a.legendTitle,Object(c.a)({},R.a.legendTitleHidden,a))},"LEGEND"),t.length&&n.a.createElement(j.a,{onBeforeDragStart:function(e){return o("tags"===e.type)},onDragEnd:function(e){var a=e.draggableId,n=e.destination,d=e.source,g=e.type;if((o(!1),console.log({draggableId:a,destination:n,source:d,type:g}),n)&&!(n.droppableId===d.droppableId&&n.index===d.index)){if("axes"===g){var u=Array.from(t);return u.splice(d.index,1),u.splice(n.index,0,a),void i(u)}var p=r[d.droppableId],b=r[n.droppableId];if("tags"===g&&"new-axis"===n.droppableId){var m=Math.max.apply(Math,Object(y.a)(t.map((function(e){return parseInt(e.replace(/[^\d]/g,""),10)}))))+1,x=Object(c.a)({},"axis-".concat(m),{id:"axis-".concat(m),name:"Axis-".concat(m),tags:[a]}),f=Object(l.a)(Object(l.a)(Object(l.a)({},r),x),{},Object(c.a)({},d.droppableId,Object(l.a)(Object(l.a)({},p),{},{tags:p.tags.filter((function(e){return e!==a}))})));return f[d.droppableId].tags.length||delete f[d.droppableId],i(Object.keys(f)),void s(f)}if(p!==b){var _=Array.from(p.tags);_.splice(d.index,1);var h=Object(c.a)({},d.droppableId,Object(l.a)(Object(l.a)({},p),{},{tags:_})),D=Array.from(b.tags);D.splice(n.index,0,a);var O=Object(c.a)({},n.droppableId,Object(l.a)(Object(l.a)({},b),{},{tags:D})),v=Object(l.a)(Object(l.a)(Object(l.a)({},r),h),O);_.length||(delete v[d.droppableId],i(t.filter((function(e){return e!==d.droppableId})))),s(v)}else{var j=Array.from(p.tags);j.splice(d.index,1),j.splice(n.index,0,a);var N=Object(l.a)(Object(l.a)({},r),{},Object(c.a)({},d.droppableId,Object(l.a)(Object(l.a)({},p),{},{tags:j})));s(N)}}}},n.a.createElement(j.c,{direction:"vertical",droppableId:"axes",type:"axes"},(function(e,a){var i=a.isDraggingOver;return n.a.createElement("div",Object.assign({className:w()(R.a.legendDroppableContainer,Object(c.a)({},R.a.isContainerDroppableNow,i))},e.droppableProps,{ref:e.innerRef}),t.map((function(e,a){var t=r[e];return n.a.createElement(S,{key:e,axis:t,index:a})})),e.placeholder)})),n.a.createElement(H,null)))})),M=(t(177),t(161)),F=(t(179),t(134)),W=t(159),Z=t.n(W),X=t(105),z=t.n(X),G=F.a.Content,J=F.a.Sider,Y=Object(o.a)((function(){var e=p((function(e){return{isSiderCollapsed:e.core.isSiderCollapsed,isSiderCollapsingNow:e.core.isSiderCollapsingNow,generateData:e.core.generateData,setSiderCollapsed:e.core.setSiderCollapsed}})),a=e.isSiderCollapsed,t=e.isSiderCollapsingNow,i=e.generateData,s=e.setSiderCollapsed;Object(r.useEffect)((function(){i({parametersCount:5,pointsCount:200})}),[i]);return n.a.createElement(F.a,{className:z.a.layout},n.a.createElement(J,{className:z.a.sider,collapsed:a,collapsedWidth:150,collapsible:!0,onCollapse:function(e){return s(e)},theme:"light",width:"20%"},n.a.createElement(P,null)),t&&n.a.createElement(M.a,{className:z.a.recalculatingResult,icon:n.a.createElement(Z.a,null),title:"Recalculating..."}),n.a.createElement(G,{className:w()(z.a.content,Object(c.a)({},z.a.contentHidden,t))},n.a.createElement(v,null)))}));s.a.render(n.a.createElement(u,null,n.a.createElement(Y,null)),document.getElementById("root"))},72:function(e,a,t){e.exports={axisItem:"axis-item_axisItem__1dQS1",isAxisItemDraggableNow:"axis-item_isAxisItemDraggableNow__35zFZ",axisTitle:"axis-item_axisTitle__V49cq",axisTags:"axis-item_axisTags__25fFX",isAxisDraggableBordered:"axis-item_isAxisDraggableBordered__PWqod",isAxisTagsDroppableNow:"axis-item_isAxisTagsDroppableNow__1YBNr",axisDragIcon:"axis-item_axisDragIcon__3QXaO"}}},[[166,1,3]]]);
//# sourceMappingURL=main.d8b0f4dc.chunk.js.map